
## D E S C R I P T I O N:

Your company is developing a custom web application that requires hosting on AWS using EC2. To ensure effective monitoring and troubleshooting, the application needs to push its logs to CloudWatch. Additionally, you want to capture and monitor custom metrics from the application to gain insights into its performance.Your task is to create an EC2 instance running this custom application, configure it to push its logs to CloudWatch, and set up custom metrics for monitoring.

## Requirements:
- Set up an EC2 instance running a custom web application.
- Install and configure the CloudWatch Agent to push application logs to CloudWatch.
- Modify the application to send custom metrics (e.g., Memory utilisation and errors) to CloudWatch.
- Set up CloudWatch Alarms to monitor custom metrics and trigger alerts for any issues or if it exceeds threshold.
- Optional (Implement SNS notifications to alert the team when alarms are triggered)
- Validate that logs and metrics are correctly displayed in CloudWatch.
- Make sure CloudWatch logs are encrypted & set to auto expire after 7 Days.


## S T E P S
- Created EC2 instance and installed `amazon-cloudwatch-agent`
- Created IAM Role with `CloudWatchAgentServerPolicy`
- Created config file cloudwatch-agent

```
{
  "logs": {
    "logs_collected": {
      "files": {
        "collect_list": [
          {
            "file_path": "/var/log/messages",
            "log_group_name": "my-app-logs",
            "log_stream_name": "i-00d82885197ae42af"
          }
        ]
      }
    }
  }
}
```

- Started the agent

```
sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl \
  -a fetch-config -m ec2 -c file:/opt/aws/amazon-cloudwatch-agent/config.json -s
```

## Custom Metrics:

```
#!/bin/bash
memory_used=$(free -m | awk '/Mem:/ {print $3}')
aws cloudwatch put-metric-data \
  --namespace "CustomApp" \
  --metric-name "MemoryUsedMB" \
  --value "$memory_used"
```

- Created Alarm using this custom metric
- Used existing SNS topic
